(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{cRhG:function(e,t,n){"use strict";n.r(t),n.d(t,"ProfileModule",(function(){return f}));var i=n("ofXK"),o=n("3Pt+"),a=n("Nm8O"),r=n("fXoL"),l=n("v0/F"),s=n("5eHb"),m=n("tyNb"),c=n("JqCM"),d=n("kmnG"),u=n("qFsG"),p=n("NFeN");const h=[{path:"",component:(()=>{class e{constructor(e,t,n,i){this.profileService=e,this.toastr=t,this.router=n,this.spinner=i,this.updateCondition=!1,this.subscription=[]}ngOnInit(){this.spinner.show(),setTimeout(()=>{this.spinner.hide()},1e3),this.name=new o.FormControl(null),this.address=new o.FormControl(null),this.image=new o.FormControl(null),this.number=new o.FormControl(null);const e=localStorage.getItem("token");if(e){const t=(new a.a).decodeToken(e);this.email=new o.FormControl(t.email)}this.getProfile(),this.setMap()}setMap(){navigator.geolocation||console.log("location is not supported"),navigator.geolocation.getCurrentPosition(e=>{const t=e.coords,n=[t.latitude,t.longitude];let i=L.map("map").setView(n,13);L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoicmFuamVldHNuIiwiYSI6ImNrbmp3N3lrcjAyNG8ycW1wajRmOXUwdGsifQ.oAWJ4AlMpmsDNq12_lHNiQ",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery \xa9 <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1IjoicmFuamVldHNuIiwiYSI6ImNrbmp3N3lrcjAyNG8ycW1wajRmOXUwdGsifQ.oAWJ4AlMpmsDNq12_lHNiQ"}).addTo(i),L.marker(n).addTo(i).bindPopup("<b>I am here</b>").openPopup()})}onImagePicked(e){const t={},n=e[0];t.fileInformation=n,t.fileName=t.fileInformation.name,t.fileType=t.fileInformation.type;const i=new FileReader;i.onload=()=>{this.imagePreview=i.result,t.base64=i.result,t.base64Data=String(t.base64).split("base64,")[1],this.image.setValue(t)},i.readAsDataURL(n)}getProfile(){var e;this.subscription.push(this.profileService.getProfile(null===(e=null==this?void 0:this.email)||void 0===e?void 0:e.value).subscribe(e=>{var t,n;e&&e.data&&(this.updateCondition=!0,this.name.setValue(e.data.name),this.image.setValue(e.data.image),this.address.setValue(e.data.address),this.number.setValue(e.data.number),this.imagePreview=null===(n=null===(t=e.data)||void 0===t?void 0:t.image)||void 0===n?void 0:n.base64,this.id=e.data._id)}))}onSubmit(){const e={name:this.name.value,email:this.email.value,image:this.image.value,number:this.number.value,address:this.address.value};this.subscription.push(this.updateCondition?this.profileService.upateProfile(e,this.id).subscribe(e=>{this.toastr.success("Profile Updated Succesfully"),this.getProfile(),this.router.navigate(["/home"])}):this.profileService.addProfile(e).subscribe(e=>{this.toastr.success("Profile Updated Succesfully"),this.getProfile(),this.router.navigate(["/home"])}))}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](l.a),r["\u0275\u0275directiveInject"](s.b),r["\u0275\u0275directiveInject"](m.c),r["\u0275\u0275directiveInject"](c.c))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-profile"]],decls:42,vars:6,consts:[[1,"conatiner"],[1,"child"],["mat-fab","","color","primary","type","button",1,"ml-5","mt-4",3,"click"],["alt","title",3,"src"],["type","file","hidden","",3,"change"],["file",""],["appearance","outline",1,"mt-4"],["type","text","matInput","",3,"formControl"],["matSuffix",""],["appearance","outline"],["type","email","readonly","","matInput","",3,"formControl"],["type","number","matInput","",3,"formControl"],["type","button","type","button",1,"btn","btn-info",3,"click"],["id","map",1,"mt-3"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-spin-clockwise",3,"fullScreen"],[2,"color","white"]],template:function(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"button",2),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275reference"](6).click()})),r["\u0275\u0275element"](3,"img",3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](4,"br"),r["\u0275\u0275elementStart"](5,"input",4,5),r["\u0275\u0275listener"]("change",(function(e){return t.onImagePicked(e.target.files)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"mat-form-field",6),r["\u0275\u0275elementStart"](8,"mat-label"),r["\u0275\u0275text"](9,"Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](10,"input",7),r["\u0275\u0275elementStart"](11,"mat-icon",8),r["\u0275\u0275text"](12,"person"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](13,"br"),r["\u0275\u0275elementStart"](14,"mat-form-field",9),r["\u0275\u0275elementStart"](15,"mat-label"),r["\u0275\u0275text"](16,"Email"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](17,"input",10),r["\u0275\u0275elementStart"](18,"mat-icon",8),r["\u0275\u0275text"](19,"email"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](20,"br"),r["\u0275\u0275elementStart"](21,"mat-form-field",9),r["\u0275\u0275elementStart"](22,"mat-label"),r["\u0275\u0275text"](23,"Address"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](24,"textarea",7),r["\u0275\u0275elementStart"](25,"mat-icon",8),r["\u0275\u0275text"](26,"home"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](27,"br"),r["\u0275\u0275elementStart"](28,"mat-form-field",9),r["\u0275\u0275elementStart"](29,"mat-label"),r["\u0275\u0275text"](30,"Phone Number"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](31,"input",11),r["\u0275\u0275elementStart"](32,"mat-icon",8),r["\u0275\u0275text"](33,"phone"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](34,"br"),r["\u0275\u0275elementStart"](35,"button",12),r["\u0275\u0275listener"]("click",(function(){return t.onSubmit()})),r["\u0275\u0275text"](36,"Update"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](37,"hr"),r["\u0275\u0275element"](38,"div",13),r["\u0275\u0275elementStart"](39,"ngx-spinner",14),r["\u0275\u0275elementStart"](40,"p",15),r["\u0275\u0275text"](41," Loading... "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}2&e&&(r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("src",t.imagePreview,r["\u0275\u0275sanitizeUrl"]),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("formControl",t.name),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("formControl",t.email),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("formControl",t.address),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("formControl",t.number),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("fullScreen",!0))},directives:[d.c,d.f,u.b,o.DefaultValueAccessor,o.NgControlStatus,o.FormControlDirective,p.a,d.g,o.NumberValueAccessor,c.a],styles:[".child[_ngcontent-%COMP%]{margin:auto;width:31%}img[_ngcontent-%COMP%]{width:43px;height:39px;margin-top:-6px}#map[_ngcontent-%COMP%]{height:60vh;width:80vh;margin:auto}"]}),e})()}];let f=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[{provide:s.b,useClass:s.b}],imports:[[i.CommonModule,d.e,u.c,o.ReactiveFormsModule,c.b,m.g.forChild(h),s.a.forRoot(),p.b]]}),e})()}}]);